{{/* Put your custom <script></script> tags here */}}

<script>

// Checks @media (prefers-color-scheme) for dark mode
function getPreferredScheme() {
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        // Dark mode is preferred
        return 'dark';
  }
  return 'light';
}

function toggleThemeForImage() {
  $('img.themed').each(function() {
    const savedTheme = localStorage.getItem('theme') || getPreferredScheme();
    var src = $(this).attr('src');
    if (src.match(/-light\.png$/) && savedTheme == 'dark') {
      $(this).attr('src', src.replace('-light.png', '-dark.png'));
    } else if (src.match(/-dark\.png$/) && savedTheme == 'light') {
      $(this).attr('src', src.replace('-dark.png', '-light.png'));
    }
  });
}
$(document).ready(function() {
  toggleThemeForImage();
  $('#buttonColorMode').click(function() {
    toggleThemeForImage();
  });
});
</script>


{{/* EXAMPLE - only load script for production
{{ if eq (hugo.Environment) "production" -}}
  {{ partial "footer/esbuild" (dict "src" "js/instantpage.js" "load" "async" "transpile" false) -}}
{{ end -}}
*/}}

{{/* EXAMPLE - only load script for a page type e.g. contact or gallery
{{ if eq .Type "gallery" -}}
  {{ partial "footer/esbuild" (dict "src" "js/gallery.js" "load" "async" "transpile" false) -}}
{{ end -}}
*/}}
